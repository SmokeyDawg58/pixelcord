@import '../buildvars';
@import '../utils';
@import '../material_design/ripple';

$titlePadding: calc(0.5 * (var(--settings-header-height) - 12px));
$titleLeftPadding: calc((var(--settings-header-height) + 6px));
$backButtonPadding: calc(0.5 * (var(--settings-header-height) - 18px));

// Inject into settings menu
.layer-86YKbF[aria-label="USER_SETTINGS"] .sidebar-nqHbhN::after {
	// Text
	@if ($DEBUG == true) {
		content: 'Pixelcord #{$version} DEV';
	} @else {
		content: 'Pixelcord #{$version}';
	}

	// Positioning
	display: block;
	margin-top: 8px;
	padding: 8px 10px;

	// Separator
	border-top: 1px solid var(--background-modifier-accent);

	// Info css
	text-transform: capitalize;
	outline: 0;

	// Font
	font-size: 12px;
	line-height: 16px;
	color: var(--text-muted);
}

// Settings sidebar
.topPill-3DJJNV .themed-2-lozF.item-3XjbnG {
	@include ripple;
}

// Items should be "material you"
.side-2ur1Qk .item-3XjbnG {
	height: var(--settings-item-height);
	border-radius: calc(0.5 * var(--settings-item-height));
}
// sidebar padding
.sidebar-nqHbhN {
	padding: 60px var(--sidebar-right-padding) 60px var(--sidebar-left-padding);
}

.theme-dark .header-145e10 .tabBar-1qdMr5 .tab-TRrPC8.active-1grPyy,
.theme-light .header-145e10 .tabBar-1qdMr5 .tab-TRrPC8.active-1grPyy,
.side-2ur1Qk .themed-2-lozF.selected-g-kMVV.item-3XjbnG,
.topPill-3DJJNV .themed-2-lozF.selected-g-kMVV.item-3XjbnG {
	&, &:hover:not(.disabled-1nofHP) {
		background-color: var(--accent-transparent);
		color: var(--accent);
		font-weight: var(--weight-header);
	}

	& .colorInteractiveActive-30E9n8 {
		color: currentColor;
	}
}

// Yeet whitespace on the left of the sidebar bc yeds
.sidebarRegion-1VBisG {
	flex: 0;
}

// Nitro tabs are special
.serverBoostTabItem-3QwA3W[aria-selected=true],
.premiumTabItem-1QTfBr[aria-selected=true] {
	background-color: var(--accent-transparent) !important;
	color: var(--accent) !important;
}
div[class*="selectedBackground"] {
	background-color: transparent;
}
div[class*="selected"] {
	color: inherit;
}

// Add ripple to the sidebar
.side-2ur1Qk .item-3XjbnG {
	@include ripple;
}

// red items should use the theme var
.side-2ur1Qk .item-3XjbnG[style^="color: hsl(359,"] {
	color: var(--red) !important;
}

// red selected
.side-2ur1Qk .item-3XjbnG[style^="color: hsl(0,"][style*="background-color: hsl(359"] {
	color: var(--red-text) !important;
	background-color: var(--red) !important;
}

// 'Google' settings
// Break the title to the text
.contentColumnDefault-3eyv5o .subscriptionDetails-ZcKNHC > .title-3hptVQ:first-of-type,
.contentColumnDefault-3eyv5o > div:first-child > div:first-child > .sectionTitle-3j2YI1:first-of-type,
.contentColumnDefault-3eyv5o > div:first-child > .sectionTitle-3j2YI1:first-of-type,
.contentColumnDefault-3eyv5o > div:first-child > .title-3hptVQ:first-child, // TODO: revert to first-of-type?
.customContainer-dK1ozq .content-28mbXd > div:first-child > div:first-child > .title-3hptVQ:first-of-type,
.customContainer-dK1ozq .content-2a4AW9 > div:nth-child(2) > .title-3hptVQ:first-of-type,
.customContainer-dK1ozq .content-2a4AW9 > div:nth-child(2) > .sectionTitle-3j2YI1 > .title-3hptVQ:first-of-type,
.contentTransitionWrap-1YD530 > div > .contentColumn-1C7as6 > .title-3hptVQ:first-of-type,
.contentTransitionWrap-1YD530 > div > .contentColumn-1C7as6 > .breadcrumbs-313Q_y:first-of-type,
.bdcompat-title:first-of-type,
.pc-settings-title:first-of-type,
.kernel-title:first-of-type,
.ysink_zone_ticker {
	// Position the title
	position: fixed;
	// top: calc(0.5 * (var(--settings-header-height) - 12px));
	// left: 75px;
	top: $titlePadding;
	left: $titleLeftPadding;
	z-index: 5;

	&, & > h1, & > h2 {
		// Style the title
		color: var(--accent-text);
		font-size: 20px;
		line-height: 24px;
		font-weight: var(--weight-header);
		text-transform: none;
	}
}
.ysink_zone_ticker {
	
}

// Some settings don't have a title, so let's add one anyway

@mixin forceTitle($text) {
	&:first-of-type::before {
		content: $text;

		position: fixed;
		// top: calc(0.5 * (var(--settings-header-height) - 12px));
		// left: 75px;
		top: $titlePadding;
		left: $titleLeftPadding;
		z-index: 5;
		color: var(--accent-text);
		font-size: 20px;
		line-height: 24px;
		font-weight: var(--weight-header);
	}
}

.layer-86YKbF[aria-label$="SETTINGS"] {

	// Nitro
	.content-374sTA > .marketingRefreshSectionTier1-1chtWC {
		@include forceTitle('Nitro');
	}

	// Boosts
	.content-11k50x > div > .marketingLogo-pyU32f {
		@include forceTitle('Server Boost');
	}

	// Payment method
	.paymentHistory-2Zf4ZE > .title-3hptVQ {
		@include forceTitle(var(--i18n-payment, 'Billing'));
	}

	// Activate community
	.banner-2zWlOa + .size24-17l95E {
		@include forceTitle('Community');
	}

	// Partnership
	.banner-2AwsUs + .size24-17l95E {
		@include forceTitle(var(--i18n-partnership, 'Partnership'));
	}

	// Discovery
	.discoverPreview-3q1szX {
		@include forceTitle(var(--i18n-discovery, 'Discovery'));
	}

	// Threads
	.banner-2G2Kv6 + .size24-17l95E {
		@include forceTitle('Thread');
	}

	// Roles editor
	.sidebar-3K3Z4C {
		@include forceTitle(var(--i18n-roles, 'Roles'));
	}

	// hypesquad
	.intro-3NvIZT {
		@include forceTitle(var(--i18n-hypesquad, 'HypeSquad'));
	}

	// TODO: Premium title whenever they add the page
}

// Make the sidebar wider
.sidebar-nqHbhN {
	width: var(--settings-sidebar-width);
}

// Make space for the blue bar
.layer-86YKbF:not(.baseLayer-W6S8cY) .standardSidebarView-E9Pc3j,
.layer-86YKbF:not(.baseLayer-W6S8cY) .standardSidebarView-E9Pc3j {
	top: calc(var(--settings-header-height) - 24px);;

	// Create the headerbar
	&::before {
		content: '';
		position: fixed;
		z-index: 3;
		background-color: var(--accent);
		width: 100%;
		height: var(--settings-header-height);
		left: 0;
		top: 0;
	}
}

// <- Button in settings
.toolsContainer-25FL6V {
	// Reposition it
	position: fixed;
	left: $backButtonPadding;
	top: $backButtonPadding;
	padding-top: 0;

	// Make it appear on top
	z-index: 5;

}

// Replace the back button with an arrow back
.closeButton-PCZcma {
	border-radius: 0;
	@include theming {
		border-color: transparent;
		&:hover {
			background-color: transparent;
		}
	}

	& > svg {
		width: 24px;
		height: 24px;
	}

	& path {
		d: path("M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z");
		fill: var(--accent-text);
	}
}

.closeButton-PCZcma:hover + .keybind-13vtq8 {
	opacity: 1;
	transform: scale(1);
}

// Turn ESC into a funny tooltip
.closeButton-PCZcma + .keybind-13vtq8 {
	font-size: 0;
	opacity: 0;
	transform: scale(0);
	visibility: hidden;

	&::after {
		content: "";
		visibility: visible;

		padding: 0;
		overflow-wrap: break-word;
		text-rendering: optimizelegibility;
		user-select: none;
		vertical-align: baseline;

		pointer-events: none;

		width: 0;
		height: 0;
		border: 5px solid transparent;
		border-top-color: var(--tooltip-bg);

		position: absolute;
		bottom: 100%;
		left: 50%;
		margin-left: -5px;
		-webkit-transform: rotate(180deg);
		transform: rotate(180deg);
		transition: var(--tooltip-animation);
	}

	&::before {
		content: var(--i18n-back, "Back");
		visibility: visible;
		position: relative;
		top: 8px; // Space

		background-color: var(--tooltip-bg);
		border-radius: 4px;
		padding: 8px;
		line-height: 14px;
		font-weight: 500;
		font-size: 13px;
		color: var(--tooltip-text);
		transition: var(--tooltip-animation);
		pointer-events: none;
	}
}
