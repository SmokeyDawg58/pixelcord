@import '../buildvars';
@import '../material_design/ripple';

// Inject into settings menu
.layer-3QrUeG[aria-label="USER_SETTINGS"] .sidebar-CFHs9e::after {
	// Text
	@if ($DEBUG == true) {
		content: 'Pixelcord #{$version} DEV';
	} @else {
		content: 'Pixelcord #{$version}';
	}

	// Positioning
	display: block;
	margin-top: 8px;
	padding: 8px 10px;

	// Separator
	border-top: 1px solid var(--background-modifier-accent);
	
	// Info css
	text-transform: capitalize;
	outline: 0;
	
	// Font
	font-size: 12px;
	line-height: 16px;
	color: var(--text-muted);
}
// Settings sidebar
.theme-dark .header-2-Imhb .tabBar-1kuXvJ .tab-ck0077.active-1MbGPa,
.theme-light .header-2-Imhb .tabBar-1kuXvJ .tab-ck0077.active-1MbGPa,
.side-8zPYf6 .themed-OHr7kt.selected-3s45Ha.item-PXvHYJ,
.topPill-30KHOu .themed-OHr7kt.selected-3s45Ha.item-PXvHYJ {
	&, &:hover:not(.disabled-1Hwwfb) {
		background-color: var(--accent-transparent);
		color: var(--accent);
		font-weight: var(--weight-header);
	}
    & .colorInteractiveActive-3Ip9Eu {
        color: currentColor;
    }
}
// Yeet whitespace on the left of the sidebar bc yeds
.sidebarRegion-VFTUkN {
	flex: 0;
}
// Nitro tabs are special
.serverBoostTabItem-2hFTIN[aria-selected=true],
.premiumTabItem-1QTfBr[aria-selected=true] {
	background-color: var(--accent-transparent) !important;
	color: var(--accent) !important;
}

// Add ripple to the sidebar
.side-8zPYf6 .item-PXvHYJ {
	@include ripple;
}
// red items should use the theme var
.side-8zPYf6 .item-PXvHYJ[style^="color: hsl(359,"] {
	color: var(--red) !important;
}
// red selected
.side-8zPYf6 .item-PXvHYJ[style^="color: hsl(0,"][style*="background-color: hsl(359"] {
	color: var(--red-text) !important;
	background-color: var(--red) !important;
}

// 'Google' settings
// Break the title to the text
.contentColumnDefault-1VQkGM .subscriptionDetails-1pYrMz > .title-3sZWYQ:first-of-type,
.contentColumnDefault-1VQkGM > div:first-child > div:first-child > .sectionTitle-2vauyC:first-of-type,
.contentColumnDefault-1VQkGM > div:first-child > .sectionTitle-2vauyC:first-of-type,
.contentColumnDefault-1VQkGM > div:first-child > .title-3sZWYQ:first-child, // TODO: revert to first-of-type?
.customContainer-1RHXqt .content-2HgFLu > div:first-child > div:first-child > .title-3sZWYQ:first-of-type,
.customContainer-1RHXqt .content-3YMskv > div:nth-child(2) > .title-3sZWYQ:first-of-type,
.customContainer-1RHXqt .content-3YMskv > div:nth-child(2) > .sectionTitle-2vauyC > .title-3sZWYQ:first-of-type,
.contentTransitionWrap-3hqOEW > div > .contentColumn-2hrIYH > .title-3sZWYQ:first-of-type,
.contentTransitionWrap-3hqOEW > div > .contentColumn-2hrIYH > .breadcrumbs-313Q_y:first-of-type
 {
	// Position the title
	position: fixed;
	top: calc(0.5 * (var(--settings-header-height) - 12px));
	left: 75px;
	z-index: 5;

	&, &>h1, &>h2 {
		// Style the title
		color: var(--accent-text);
		font-size: 20px;
		line-height: 24px;
		font-weight: var(--weight-header);
		text-transform: none;
	}
}

// Some settings don't have a title, so let's add one anyway

@mixin forceTitle($text) {
	&:first-of-type::before {
		content: $text;

		position: fixed;
		top: calc(0.5 * (var(--settings-header-height) - 12px));
		left: 75px;
		z-index: 5;
		color: var(--accent-text);
		font-size: 20px;
		line-height: 24px;
		font-weight: var(--weight-header);
	}
}

.layer-3QrUeG[aria-label$="SETTINGS"] {
	
	// Nitro
	.content-2c3hgM > .subscriptionsRedirectContainer-21LuI0 {
		@include forceTitle('Nitro');
	}

	// Boosts
	.content-3BhRLj > .marketingLogo-1D8DV6 {
		@include forceTitle('Server Boost');
	}

	// Payment method
	.paymentHistory-2FXzro>.title-3sZWYQ {
		@include forceTitle(var(--i18n-payment, 'Billing'));
	}
	
	// Activate community
	.banner-2zWlOa+.size24-RIRrxO {
		@include forceTitle('Community');
	}
	
	// Partnership
	.banner-2AwsUs+.size24-RIRrxO {
		@include forceTitle(var(--i18n-partnership, 'Partnership'));
	}
	
	// Discovery
	.discoverPreview-3q1szX {
		@include forceTitle(var(--i18n-discovery, 'Discovery'));
	}

	// Threads
	.banner-2G2Kv6+.size24-RIRrxO {
		@include forceTitle('Thread');
	}

	// Roles editor
	.sidebar-dLM-kh {
		@include forceTitle(var(--i18n-roles, 'Roles'));
	}
	
	// hypesquad
	.intro-325xRx {
		@include forceTitle(var(--i18n-hypesquad, 'HypeSquad'));
	}
}

// Make the sidebar wider
.sidebar-CFHs9e {
	width: var(--settings-sidebar-width);
}

// Make space for the blue bar
.layer-3QrUeG[aria-label=RTC_DEBUG] .standardSidebarView-3F1I7i,
.layer-3QrUeG[aria-label$="SETTINGS"] .standardSidebarView-3F1I7i {
	top: calc(var(--settings-header-height) - 24px);

	// Create the headerbar
	&::before {
		content: '';
		position: fixed;
		z-index: 3;
		background-color: var(--accent);
		width: 100%;
		height: var(--settings-header-height);
		left: 0;
		top: 0;
	}
}